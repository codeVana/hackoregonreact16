// root/imports/startup/server/email-template.js
import React from 'react';
import { Box, Email, renderEmail, Item, Span, Image, A} from 'react-html-email';


// added our const that holds a string of css (it is worth noting that we can also do inline jss styles as well)
const css = `
@media only screen and (max-device-width: 480px) {
  font-size: 20px !important;
}`.trim();


var memes = [
  "https://media.giphy.com/media/13AK9gO1EHko5q/giphy.gif",
  "http://s2.quickmeme.com/img/df/df414399b34c2356d43c9a9188374f2292ebffa3eb1f2e5122be08aff351d276.jpg",
  "https://media.giphy.com/media/3oz8y07PqQ3PGo4fe0/source.gif",
  "http://66.media.tumblr.com/d05d6c2f4b46133040171a60286461e3/tumblr_nql34zCOlC1uogcqzo3_400.gif"
    ];
    

const ReMeMeder = function() {
  var memei = memes[Math.floor(Math.random()*memes.length)];
  console.log("Random meme image"+memei);
  return <Email title="Hello from ReMeMeder" headCSS={css}> {/* then we inject the css here, to the left, in a prop called headCSS */}
    <Item>
      <Span fontSize={15}>Hello, from ReMeMeder, your daily reminder to take your meditation</Span>
    </Item>
    <Item>
        <Box cellSpacing={20} width="100%" style={{ borderTop: '3px solid black' }}>
        <Item>
          <Span color="gray" lineHeight={20}>Generated by <A href="https://github.com/chromakode/react-html-email">ReMEMEder: A Meteor+React App</A></Span>
          <Image data-mc-bar="bar" data-mc-baz="baz" alt="react" src={memei} width={900} height={500} />" 
        </Item>
      </Box>
    </Item>
    <Item>
      <Box cellSpacing={20} width="100%" style={{ borderTop: '3px solid black' }}>
        <Item>
          <Span color="gray" lineHeight={20}>Thanks to <A href="https://github.com/chromakode/react-html-email">react-html-email</A></Span>
          <Image data-mc-bar="bar" data-mc-baz="baz" alt="react" src="http://www.unixstickers.com/image/data/stickers/react/badge/React-JS.sh.png" width={100} height={100} />
        </Item>
      </Box>
    </Item>
    </Email>;
};
// NEW: Add getter function that return the rendered react component (as a string holdign the HTML email code)
export const GetContactEmail = function(){
  return renderEmail(<ReMeMeder />);
}
